@page "/blackListCreate"

@using BlueNet.Models;
@using BlueNet.Manager.Services;

@inject IBlackListApiClient BlackListApiClient;
@inject NavigationManager NavigationManager;
@inject IToastService ToastService; 

<h3>BlackList Create</h3>

<EditForm Model="BLackListCreate" OnValidSubmit="SubmitCreateBlackList">
    <DataAnnotationsValidator />
    <div class="form-group">
        <label for="Url">Url</label>
        <InputText class="form-control" @bind-Value="BLackListCreate.Url"></InputText>
        <ValidationMessage For="()=>BLackListCreate.Url"></ValidationMessage>
        <small id="urlHelp" class="form-text text-muted">Please enter black list title here.</small>
    </div>

    @*<div class="form-group">
        <label for="UserId">UserId</label>
        <InputNumber class="form-control" @bind-Value="BLackListCreate.UserId"></InputNumber>
        <ValidationMessage For="()=>BLackListCreate.UserId"></ValidationMessage>
        <small id="userIdHelp" class="form-text text-muted">Please enter black list title here.</small>
    </div>*@


    <button type="submit" class="btn btn-primary">Submit</button>
</EditForm>

@code {
   private BlackListCreateRequest BLackListCreate = new BlackListCreateRequest();

   private async Task SubmitCreateBlackList(EditContext context)
   {
        var result = await BlackListApiClient.CreateBlackList(BLackListCreate);
       
        if (result)
         {
            ToastService.ShowSuccess($"{BLackListCreate.Url} has been created successfully.", "Success");
            NavigationManager.NavigateTo("/blackLists");
        }
        else
        {
            ToastService.ShowError($"An error occurred in progress. Please contact to administrator.","Error");
        }
       
    }
}
